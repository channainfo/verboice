%h2 Call logs

%table.GralTable
  %tr
    %th= t('views.call_logs.index.label.duration')
    %th= t('views.call_logs.index.label.started')
    %th= t('views.call_logs.index.label.finished')
    %th= t('views.call_logs.index.label.direction')
    %th= t('views.call_logs.index.label.channel')
    %th= t('views.call_logs.index.label.call_flow')
    %th= t('views.call_logs.index.label.state')
    %th &nbsp;

  - @logs.each do |log|
    %tr
      %td= log.duration if log.duration && log.duration > 0
      %td= log.created_at.in_time_zone @project.time_zone
      %td= log.finished_at.try(:in_time_zone, @project.time_zone) || ''
      %td= log.direction
      %td= log.channel.try(:name)
      %td= log.call_flow.try(:name)
      %td
        - if log.state == CallLog::STATE_COMPLETED
          = log.state
        - else
          - if log.fail_reason.present? && log.fail_reason == CallLog::REASON_HANGUP
            incompleted
          - else
            = log.fail_reason
      %td= link_to t('views.call_logs.index.action.view_details'), call_log_path(log)

%br/

%div= page_entries_info @logs, :entry_name => t('views.call_logs.index.label.call_log')
= will_paginate @logs, :param_name => 'page'