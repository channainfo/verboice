- content_for :head do
  :javascript
    window.languages = #{languages_for_js};

= form_for(@project, :builder => InsteddFormBuilder) do |f|
  - if @project.errors.any?
    #error_explanation
      %h2
        = pluralize(@project.errors.count, "error")
        = t('views.projects._form.errors.prohibited')
      %ul
        - @project.errors.full_messages.each do |msg|
          %li= msg

  %br

  %h1= t('views.projects._form.label.properties')

  = f.text_field :name
  = f.time_zone_select :time_zone, ActiveSupport::TimeZone.all

  %hr

  %br
  %br

  %h1= t('views.projects._form.label.languages')

  = f.label :default_language
  %br
  = collection_select :project, :default_language, @project.languages.map{|l| LanguageList::LanguageInfo.find(l)}, :iso_639_1, :name, {}, :class => 'w30'

  %br
  %br

  = f.label :languages, t('views.projects._form.label.supported_languages')
  %br
  %ul.clist.w30
    - @project.languages.each do |iso|
      - language = LanguageList::LanguageInfo.find(iso)
      %li
        = hidden_field_tag 'project[languages][]', iso
        / %input.ux-clist{:type => 'text', :value => "#{language.name} (#{language.iso_639_1})"}
        %span.language= "#{language.name} (#{language.iso_639_1})"
        %button.clist-remove.remove_language
    %li
      %input#add_language.ux-type{:type => 'text', :placeholder => "#{t('views.projects._form.label.add_new_language')}"}
      %button#add_language_button.clist-add
    .hidden
      %li#language_proto
        = hidden_field_tag 'project[languages][]'
        %span.language
        %button.clist-remove.remove_language

  %br

  %hr

  %br
  %br

  %h1= t('views.projects._form.label.status_callback')

  = f.text_field :status_callback_url, :label => t('views.projects._form.label.url')
  = f.text_field :status_callback_url_user, :label => t('views.projects._form.label.user'), :autocomplete => 'off'
  = f.password_field :status_callback_url_password, :label => t('views.projects._form.label.password'), :autocomplete => 'off'

  %hr

  - if @project.new_record?
    %button.grey{:type => "submit"}= t('views.projects._form.action.save')
    = link_to t('views.projects._form.action.cancel'), projects_path, :class => "cancel", :style => 'top: 1px;'
  - else
    %button.grey{:type => "submit"}= t('views.projects._form.action.update')
    = link_to t('views.projects._form.action.cancel'), project_path(@project), :class => "cancel", :style => 'top: 1px;'
